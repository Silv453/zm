#
#  Project Zomboid Dedicated Server using SteamCMD Docker Image.
#  Copyright (C) 2021-2022 Renegade-Master [renegade.master.dev@protonmail.com]
#
#  This program is free software: you can redistribute it and/or modify
#  it under the terms of the GNU General Public License as published by
#  the Free Software Foundation, either version 3 of the License, or
#  (at your option) any later version.
#
#  This program is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU General Public License for more details.
#
#  You should have received a copy of the GNU General Public License
#  along with this program.  If not, see <https://www.gnu.org/licenses/>.
#

version: "3.8"

services:
  zomboid-dedicated-server:
    build:
      context: .
      dockerfile: docker/zomboid-dedicated-server.Dockerfile
    image: "docker.io/renegademaster/zomboid-dedicated-server:latest"
    container_name: zomboid-dedicated-server
    restart: "no"
    environment:
      - "ADMIN_PASSWORD=changeme"
      - "ADMIN_USERNAME=superuser"
      - "AUTOSAVE_INTERVAL=15"
      - "BIND_IP=0.0.0.0"
      - "DEFAULT_PORT=16261"
      - "GAME_VERSION=public"
      - "GC_CONFIG=ZGC"
      - "MAP_NAMES=Muldraugh, KY"
      - "MAX_PLAYERS=16"
      - "MAX_RAM=4096m"
      - "MOD_NAMES="
      - "MOD_WORKSHOP_IDS=2834352171;2878374713;3071370537;2578727114;2732639855;3067678917;2893333090;2864517038;2959854619;3072719389;2732594572;3056481712;3056538624;2769995104;2776633989;2966574762;2967820281;3073430075;2801575579;2566953935;2740919036;2977982429;2554699200;2898065560;2872574857;2667899942;3054443004;2725216703;2970858855;2873405334;2929123989;2478768005;2914364562;3038026478;2931041223;2934155949;2849467715;2687798127;3002822422;3012122638;2999595757;2812511056;2949768076;2831786301;2757712197;2779627490;2899457928;2713921292;2895419952;2852654276;2392709985;2844685624;2766922265;2715958036;2613146550;2966176354;3008448748;2648779556;2487022075;3038476940;2856413047;2951270166;2717792692;2384329562;2991291149;2986578314;2962908954;2985394645;2936196344;2795677303;3038108150;2908614026;2913634132;2900580391;3005903549;3026723485;2991201484;2937786633;2873290424;2913633066;2818847163;2870394916;3052360250;2886832936;3036027020;3034636011;2886833398;2932549988;2952802178;2942793445;2922441474;3008795514;2642541073;962175696;2969343830;3001592312;2932547723;2897390033;2971246021;1539281445;2992977067;2959440380;2807001835;3036878362;2802249785;2392987599;2335368829;2911197660;3014820613;2588598892;2584991527;2984487137;2778576730;2282429356;2992677535;2592358528;2811232708;2963237571;2984482062;2636100523;2792425535;2913137598;2849247394;2809204984;3028528478;2766033079;2947008195;2965943353;3004563786;3051277957;2988491347;2981216690;2850135071;2931233550;2460154811;2934621024;2423906082;2905027525;2863949128;2856740739;2857296919;2903870217;2816646537;2711057211;2997582470;2847911733;2895585037;2875848298;2635550102;3006143351;2787291513;2337452747;3029035272;2853833759;3011430652;3039365081;2977898120;3001306950;2599752664;2940037520;2529746725;2925034918;1254546530;2674541310;2975848784;2950608437;2867163008;2864043248;2513537093;2458631365;2701170568;2774834715;2948944961;2941368238;2904920097;1510950729;2940354599;2756490460;2915430406;2447729538;2985328540;2693585128;2688538916;3034144525;2932632173;2876610875;305031408;3043243994;3031475005;3000924731;2732662310;2926691844;2464581798;3037988451;2810800927;2659216714;2684745894;2553809727;2881764317;2737665235;2744675505;3025593219;2789150859;2855799027;2904102009;3032738941;2941065090;2805275656;3033301901;2875394066;2996013868;2734705913;2879745353;2980294462;2629286881;2694448564;2169435993;2842158398;2988665127;3035924033;2859296947;3030479338;2928707272;2945060824;2919572179;2792245343;2923439994;1299328280;2801575579;2744343022;2857842616;2822983942;2973053380;2975204120;2974760428;2754567348;2237300246;2844829195;2637692469;2837923608;2445720450;2997360515;2990322197;2932823902;1343686691;2890440427;3024365998;2719327441;2869248721;2716710487;3044807092;2812326159;2684285534;2812664856;2026976958;2623855083;2864231031;3027968416;2714848168;2921029369;3000086744;2868394326;2852704777;3002666175;2963511042;2877732496;32136889;2822286426;3002239837;2746736222;2901962885;2927744729;2572385719;2612584219;2840487215;2845952197;2969551071;2818577583;2735579575;2845810596;2657661246;"
      - "PAUSE_ON_EMPTY=true"
      - "PUBLIC_SERVER=true"
      - "RCON_PASSWORD=changeme_rcon"
      - "RCON_PORT=27015"
      - "SERVER_NAME=ZomboidServer"
      - "SERVER_PASSWORD="
      - "STEAM_VAC=true"
      - "UDP_PORT=16262"
      - "USE_STEAM=true"
      - "TZ=UTC"
    ports:
      - target: 16261
        published: 16261
        protocol: udp
      - target: 16262
        published: 16262
        protocol: udp
      - target: 27015
        published: 27015
        protocol: tcp
    volumes:
      - ./ZomboidDedicatedServer:/home/steam/ZomboidDedicatedServer
      - ./ZomboidConfig:/home/steam/Zomboid/
